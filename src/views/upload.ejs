<!doctype html>
<html>

<head>
	<%- include('./partials/head') %>
	<script src="./js/upload.js" defer></script>
</head>

<body>
	<div class="container">
		<h1>Send to Kobo</h1>

		<main>
			<main>
				<form action="/upload" method="post" enctype="multipart/form-data">
					<label for="keyInput" class="mt-4">Enter key</label>
					<div class="input-group">
						<input type="text" class="form-control" aria-label="Large" aria-describedby="inputGroup-sizing-sm"
							name="key" id="keyinput" autocomplete="off" pattern="...." placeholder="----" required
							style="text-transform: uppercase;" maxlength=4>
					</div>

					<div id="uploadBox" class="mb-2">
						<div>
							<div id="uploadIcon">
								<svg xmlns="http://www.w3.org/2000/svg" viewBox="-5 -2 24 24" width="32" fill="currentColor"><path d="M5 18v2H3v-2H0V0h11a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H5zM3 2H2v14h1V2zm2 0v14h6a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H5zm1 2h5v2H6V4zm0 3h5v2H6V7z"></path></svg>
							</div>
							<h4 id="uploadTitle">Drag and a book, or <span class="emphasize">Browse</span></h4>
							<p class="deemphasize">Supports .epub, .kepub, .cbz, .pdf and .cbr</p>
			
							<input type="file" class="custom-file-input hidden" name="file" id="fileinput"
								accept=".epub,.mobi,.pdf,.cbz,.cbr,application/pdf,application/vnd.comicbook+zip,application/vnd.comicbook-rar"
								required>
						</div>
					</div>
					<small id="fileinfo" class="form-text text-muted mb-4"></small>
			
					<input type="submit" class="btn btn-primary" value="Upload and send">
			
					<div class="mt-3">
						<div id="uploadstatus" class="alert alert-danger hidden" role="alert"></div>
					</div>
				</form>
			
				<hr>
				<section class="mt-5">
					<p>
						Go to this this page on your Kobo ereader and you see a unique key. Enter it in this form and
						upload an ebook and it will appear as a download link on the ereader.
						<br> <br>
						If you send an EPUB file to a Kobo, it will be converted into a Kobo EPUB using Kepubify.
						<br> <br>
						Your ebook will be stored on the server as long as your Kobo/Kindle is viewing the unique key and is
						connected to wifi. It will be deleted irrevocably when the key expires about 30 seconds after you
						close the browser, generate a new key or disable wifi on your ereader.
						<br> <br>
						By using this tool you agree that the ebook you upload is processed on the server and stored for a
						short time.
					</p>
			
					<hr>
			
					<p>
						Created by <a href="https://github.com/dylanwe" target="_blank">Dylan</a> and djazz. Powered by <a
							href="https://koajs.com/" target="_blank">Koa</a>, <a href="https://pgaskin.net/kepubify/"
							target="_blank">Kepubify</a> <br />Source code on <a
							href="https://github.com/dylanwe/send-to-reader" target="_blank">Github</a>
					</p>
				</section>
			</main>
	</div>
</body>

</html>